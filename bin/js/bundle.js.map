{"version":3,"sources":["webpack:///webpack/bootstrap 8b36bd2c96e5ecd29a07","webpack:///./script/app.js","webpack:///./script/utils/Connect.js","webpack:///./script/utils/util.js"],"names":["Laya","Stage","Sprite","Event","Handler","Text","Redux","combineReducers","createStore","compose","applyMiddleware","stage","init","WebGL","scaleMode","SCALE_FIXED_WIDTH","alignH","ALIGN_CENTER","alignV","ALIGN_MIDDLE","screenMode","SCREEN_HORIZONTAL","txt1","color","fontSize","pos","addChild","txt2","initTodo","Immutable","todosReducer","todos","action","type","merge","payload","counInfo","i","counterReducer","counter","setIn","appReducer","appStore","ReduxThunk","default","window","__REDUX_DEVTOOLS_EXTENSION__","noop","initStore","state","text","JSON","stringify","dispatch","a","getState","setTimeout","c","d","Connect","path","component","bindState","subList","push","paths","split","_state","store","call","unsubscribe","subscribe","Object","keys","forEach","components","uuid","getIn","s","hexDigits","substr","Math","floor","random","join","obj","param"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./bin/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8b36bd2c96e5ecd29a07","var { Stage, Sprite, Event, Handler, Text } = Laya;\r\nvar { combineReducers, createStore, compose, applyMiddleware } = Redux;\r\n\r\nimport { Connect } from './utils/Connect';\r\n\r\nvar stage;\r\nLaya.init(1334, 750, Laya.WebGL);\r\nstage = Laya.stage;\r\nstage.scaleMode = Stage.SCALE_FIXED_WIDTH;\r\nstage.alignH = Stage.ALIGN_CENTER;\r\nstage.alignV = Stage.ALIGN_MIDDLE;\r\nstage.screenMode = Stage.SCREEN_HORIZONTAL;\r\n\r\n\r\nvar txt1 = new Text();\r\ntxt1.color = '#FFFFFF';\r\ntxt1.fontSize = 32;\r\ntxt1.pos(40, 40);\r\nstage.addChild(txt1);\r\n\r\nvar txt2 = new Text();\r\ntxt2.color = '#FFFFFF';\r\ntxt2.fontSize = 32;\r\ntxt2.pos(40, 140);\r\nstage.addChild(txt2);\r\n\r\nvar initTodo = Immutable({});\r\nfunction todosReducer(todos = initTodo, action) {\r\n\tswitch (action.type) {\r\n\t\tcase 'TODO':\r\n\t\t\treturn todos.merge(action.payload); //[ ...todos, action.payload ]//\r\n\t\tdefault:\r\n\t\t\treturn todos\r\n\t}\r\n};\r\nvar counInfo = Immutable({ i: 0});\r\nfunction counterReducer(counter = counInfo, action) {\r\n\tswitch (action.type) {\r\n\t\tcase 'INCREMENT':\r\n\t\t\treturn counter.setIn(['i'], counter.i+action.payload.i) // counter 是值传递，因此可以直接返回一个值\r\n\t\tdefault:\r\n\t\t\treturn counter\r\n\t}\r\n};\r\n\r\n\r\nconst appReducer = combineReducers({\r\n\tcounter: counterReducer, // 键名就是该 reducer 对应管理的 state\r\n\ttodos: todosReducer\r\n});\r\n\r\nvar appStore = createStore(appReducer, compose(\r\n\tapplyMiddleware(ReduxThunk.default),\r\n\twindow.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : noop => noop\r\n));\r\nConnect.initStore(appStore);\r\n\r\n\r\n\r\nConnect(\"counter.i\", txt1, function(state) {\r\n\tthis.text = JSON.stringify(state)\r\n});\r\n\r\nConnect(\"todos\", txt2, function(state) {\r\n\tthis.text = JSON.stringify(state)\r\n});\r\n\r\nappStore.dispatch({\r\n\ttype: 'TODO',\r\n\tpayload: { a: 12 }\r\n});\r\nappStore.dispatch({\r\n\ttype: 'INCREMENT',\r\n\tpayload: { i: 2 }\r\n});\r\n\r\n\r\nappStore.dispatch((() => {\r\n\treturn (dispatch, getState) => {\r\n\t\tsetTimeout(() => dispatch({\r\n\t\t\ttype: 'TODO',\r\n\t\t\tpayload: { c: 12 }\r\n\t\t}), 1000);\r\n\t}\r\n})());\r\n\r\n\r\nappStore.dispatch((() => {\r\n\treturn (dispatch, getState) => {\r\n\t\tsetTimeout(() => dispatch({\r\n\t\t\ttype: 'FFF',\r\n\t\t\tpayload: { d: 12 }\r\n\t\t}), 8000);\r\n\t}\r\n})());\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./script/app.js","\r\nimport { uuid, getIn } from './util';\r\n/*export class Basecomponent {\r\n\r\n\t_state = null;\r\n\r\n\tonStateChange() {\r\n\r\n\t} \r\n\r\n}*/\r\n\r\n\r\nexport function Connect(path, component, bindState) {\r\n\t/*var i = path.indexOf(\".\");\r\n\tvar module = path.substr(0, i);\r\n\tvar pathIn = path.substring(i+1)\r\n\tvar state = Connect.store[module];*/\r\n\tif (!Connect.subList[path]) { \r\n\t\tConnect.subList[path] = [component];\r\n\t} else {\r\n\t\tConnect.subList[path].push(component);\r\n\t}\r\n\t// Connect.subList[path] = component;\r\n\tbindState && (component.bindState = bindState) ;\r\n\tif (typeof component.bindState === \"function\") {\r\n\t\tvar paths = path.split(\".\");\r\n\t\tvar _state = getIn(Connect.store, path);\r\n\t\tcomponent.state = _state;\r\n\t\tcomponent.bindState.call(component, _state);\r\n\t}\r\n\t\r\n}\r\n\r\nConnect.subList = {};\r\n\r\nConnect.initStore = store => {\r\n\tConnect.store = store;\r\n\tvar unsubscribe = store.subscribe(() => {\r\n\t\tObject.keys(Connect.subList).forEach(function(path, i) {\r\n\t\t\tvar components = Connect.subList[path];\r\n\t\t\tcomponents.forEach(function(component, i) {\r\n\t\t\t\tvar _state = getIn(Connect.store, path);\r\n\t\t\t\tif (component.state !== _state) {\r\n\t\t\t\t\tcomponent.state = _state;\r\n\t\t\t\t\tcomponent.bindState.call(component, _state);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./script/utils/Connect.js","\r\n\r\nexport function uuid() {\r\n    var s = [];\r\n    var hexDigits = \"0123456789abcdef\";\r\n    for (var i = 0; i < 36; i++) {\r\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n    }\r\n    s[14] = \"4\";\r\n    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n    s[8] = s[13] = s[18] = s[23] = \"-\";\r\n    var uuid = s.join(\"\");\r\n    return uuid;\r\n}\r\n\r\nexport function getIn(store, path) {\r\n\tvar paths = path.split(\".\");\r\n\tvar obj = store.getState();\r\n\tpaths.forEach(function(param, i) {\r\n\t\tobj = obj[param]\r\n\t});\r\n\treturn obj;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./script/utils/util.js"],"sourceRoot":""}