{"version":3,"sources":["webpack:///webpack/bootstrap b4deef79410131814fc6","webpack:///./script/app.js","webpack:///./script/actions/index.js","webpack:///./script/utils/Connect.js","webpack:///./script/utils/util.js","webpack:///./script/reducer/appReducer.js","webpack:///./script/reducer/counterReducer.js","webpack:///./script/reducer/todosReducer.js","webpack:///./script/components/DemoPanel.js","webpack:///./script/store/store.js"],"names":["Laya","Stage","Sprite","Event","Handler","Text","stage","init","WebGL","scaleMode","SCALE_FIXED_WIDTH","alignH","ALIGN_CENTER","alignV","ALIGN_MIDDLE","screenMode","SCREEN_HORIZONTAL","use","panel","addChild","dispatch","i","cc","dd","setTimeout","ff","todo","increment","item","getState","type","payload","p","Connect","subList","path","component","bindState","uuid","paths","split","_state","store","state","unsubscribe","subscribe","Object","keys","forEach","components","displayedInStage","destroyed","getIn","d","Date","getTime","replace","c","r","Math","random","floor","toString","obj","param","Redux","combineReducers","counter","todos","counterReducer","counInfo","Immutable","action","setIn","todosReducer","initTodo","merge","DemoPanel","args","width","height","_render","txt1","set","color","fontSize","pos","text","JSON","stringify","txt2","console","log","assign","createStore","compose","applyMiddleware","ReduxThunk","default","window","__REDUX_DEVTOOLS_EXTENSION__","noop"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./bin/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b4deef79410131814fc6","\r\nimport Connect from './utils/Connect';\r\nimport store from './store/store';\r\nimport DemoPanel from './components/DemoPanel';\r\nimport { todo, increment } from './actions';\r\n\r\nvar { Stage, Sprite, Event, Handler, Text } = Laya;\r\n\r\nvar stage;\r\nLaya.init(1334, 750, Laya.WebGL);\r\nstage = Laya.stage;\r\nstage.scaleMode = Stage.SCALE_FIXED_WIDTH;\r\nstage.alignH = Stage.ALIGN_CENTER;\r\nstage.alignV = Stage.ALIGN_MIDDLE;\r\nstage.screenMode = Stage.SCREEN_HORIZONTAL;\r\n\r\nConnect.use(store);\r\n\r\nvar panel = new DemoPanel();\r\nstage.addChild(panel);\r\n\r\nstore.dispatch( increment({i: 12}) );\r\n\r\nstore.dispatch( todo({cc: 12}) );\r\nstore.dispatch( todo({dd: 12}) );\r\n\r\nsetTimeout(() => {\r\n\tstore.dispatch( todo({ff: 12}) );\r\n}, 2000);\r\n\r\nsetTimeout(() => {\r\n\tstore.dispatch( increment({i: 8}) );\r\n}, 3000);\r\n\n\n\n// WEBPACK FOOTER //\n// ./script/app.js","\r\nexport function todo(item) {\r\n\treturn (dispatch, getState) => {\r\n\t\tsetTimeout(() => dispatch({\r\n\t\t\ttype: 'TODO',\r\n\t\t\tpayload: item\r\n\t\t}), 2000);\r\n\t}\r\n}\r\n\r\nexport function increment(p) {\r\n\treturn {\r\n\t\ttype: 'INCREMENT',\r\n\t\tpayload: p\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./script/actions/index.js","\r\nimport { uuid, getIn } from './util';\r\n\r\n\r\nvar subList = {};\r\nexport default function Connect(path, component, bindState) {\r\n\tif (!component.uuid) { component.uuid = uuid(); }\r\n\tif (!subList[path]) {  subList[path] = {}; } \r\n\tsubList[path][component.uuid] = component;\r\n\r\n\tbindState && (component.bindState = bindState) ;\r\n\tif (typeof component.bindState === \"function\") {\r\n\t\tvar paths = path.split(\".\");\r\n\t\tvar _state = getIn(Connect.store, path);\r\n\t\tcomponent.state = _state;\r\n\t\tcomponent.bindState(_state);\r\n\t}\r\n\t\r\n}\r\n\r\nConnect.use = store => {\r\n\tConnect.store = store;\r\n\tvar unsubscribe = store.subscribe(() => {\r\n\t\tObject.keys(subList).forEach(function(path, i) {\r\n\t\t\tvar components = subList[path];\r\n\t\t\tObject.keys(subList[path]).forEach(function(uuid, i) {\r\n\t\t\t\tlet component = subList[path][uuid];\r\n\t\t\t\tvar _state = getIn(Connect.store, path);\r\n\t\t\t\tif (component.displayedInStage===false || component.destroyed) {\r\n\t\t\t\t\tdelete subList[path][uuid];\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (component.state !== _state) {\r\n\t\t\t\t\tcomponent.state = _state;\r\n\t\t\t\t\tcomponent.bindState(_state);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./script/utils/Connect.js","\r\nexport function uuid() {\r\n\tvar d = new Date().getTime();\r\n\tvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n\t\tvar r = (d + Math.random() * 16) % 16 | 0;\r\n\t\td = Math.floor(d / 16);\r\n\t\treturn (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n\t});\r\n\treturn uuid;\r\n}\r\n\r\nexport function getIn(store, path) {\r\n\tvar paths = path.split(\".\");\r\n\tvar obj = store.getState();\r\n\tpaths.forEach(function(param, i) {\r\n\t\tobj = obj[param]\r\n\t});\r\n\treturn obj;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./script/utils/util.js","import counterReducer from \"./counterReducer\";\r\nimport todosReducer from \"./todosReducer\";\r\n\r\nvar { combineReducers } = Redux;\r\n\r\nexport default combineReducers({\r\n\tcounter: counterReducer, // 键名就是该 reducer 对应管理的 state\r\n\ttodos: todosReducer\r\n});\n\n\n// WEBPACK FOOTER //\n// ./script/reducer/appReducer.js","\r\nvar counInfo = Immutable({ i: 0});\r\nexport default function counterReducer(counter = counInfo, action) {\r\n\tswitch (action.type) {\r\n\t\tcase 'INCREMENT':\r\n\t\t\treturn counter.setIn(['i'], counter.i+action.payload.i) // counter 是值传递，因此可以直接返回一个值\r\n\t\tdefault:\r\n\t\t\treturn counter\r\n\t}\r\n};\n\n\n// WEBPACK FOOTER //\n// ./script/reducer/counterReducer.js","\r\nvar initTodo = Immutable({});\r\nexport default function todosReducer(todos = initTodo, action) {\r\n\tswitch (action.type) {\r\n\t\tcase 'TODO':\r\n\t\t\treturn todos.merge(action.payload); //[ ...todos, action.payload ]//\r\n\t\tdefault:\r\n\t\t\treturn todos\r\n\t}\r\n};\n\n\n// WEBPACK FOOTER //\n// ./script/reducer/todosReducer.js","\r\nimport Connect from './../utils/Connect';\r\n\r\nvar { Stage, Sprite, Event, Handler, Text } = Laya;\r\n\r\nexport default class DemoPanel extends Laya.Sprite {\r\n\r\n\tconstructor (...args) {\r\n\t    super(...args);\r\n\t\tthis.width  = Laya.stage.width;\r\n\t\tthis.height = Laya.stage.height;\r\n\t\tthis._render();\r\n\t\tConnect(\"counter\", this);\r\n\t}\r\n\t\r\n\t_render() {\r\n\t\tvar txt1 = new Text();\r\n\t\ttxt1.set({ color: \"#FAF86A\", fontSize: 36, pos: [40,40] });\r\n\t\tthis.addChild(txt1);\r\n\t\tConnect(\"counter.i\", txt1, state => txt1.text = JSON.stringify(state) );\r\n\r\n\t\tvar txt2 = new Text();\r\n\t\ttxt2.set({ color: \"#FFFFFF\", fontSize: 36, pos: [40,140] });\r\n\t\tthis.addChild(txt2);\r\n\t\tConnect(\"todos\", txt2, state => txt2.text = JSON.stringify(state) );\r\n\t}\r\n\t\r\n\tbindState() {\r\n\t\tconsole.log(Object.assign({}, this.state) );\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./script/components/DemoPanel.js","var { createStore, compose, applyMiddleware } = Redux;\r\n\r\nimport appReducer from \"./../reducer/appReducer\";\r\n\r\nexport default createStore(appReducer, compose(\r\n\tapplyMiddleware(ReduxThunk.default),\r\n\twindow.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : noop => noop\r\n));\n\n\n// WEBPACK FOOTER //\n// ./script/store/store.js"],"sourceRoot":""}